image: node:latest

cache:
    paths:
        - node_modules/

build:
    stage: build
    tags:
        - shared
    script:
        - npm install
        - npm run build
    artifacts:
        paths:
            - dist

deploy:
    image: node:latest
    environment:
        name: production
        url: https://bibites.kkhost.pl
    dependencies:
        - build
    tags:
        - shared
    script:
        - docker-compose up
